(this.webpackJsonpmeest_moderation_panel=this.webpackJsonpmeest_moderation_panel||[]).push([[64],{1017:function(e,r,a){"use strict";a.r(r);var s=a(62),t=a(115),n=a.n(t),l=a(172),c=a(168),i=a(169),o=a(170),m=a(171),u=a(1),d=a(173),h=a(88),p=h.apiEnd+"/signup",b=localStorage.getItem("token");function j(e){return d.a.post(p,{firstName:e.firstName,lastName:e.lastName,username:e.username,email:e.email,password:e.password,role_name:e.role_name},{headers:{Authorization:"Bearer ".concat(b)}})}var g=a(116),x=a(52),O=a.n(x),f=(a(87),a(403),a(667)),v=a(673),w=a(30),N=function(e){Object(o.a)(a,e);var r=Object(m.a)(a);function a(){var e;Object(c.a)(this,a);for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return(e=r.call.apply(r,[this].concat(i))).state={allUser:[],user:{firstName:"",lastName:"",username:"",email:"",password:"",role_name:""},confermPassword:"",errors:{},value1:"valid"},e.handleSubmit=function(){var r=Object(l.a)(n.a.mark((function r(a){var s,t,l,c,i,o,m;return n.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a.preventDefault(),r.next=3,e.validate();case 3:if(s=r.sent,t=e.state,l=t.user,c=t.errors,i=Object.values(c).map((function(e){return""!==e})),0!==(o=i.filter((function(e){return 1==e}))).length||0!==Object.keys(s).length){r.next=14;break}return r.next=10,j(l);case 10:200===(m=r.sent).status?(g.b.success("Succuessfully created",{position:"top-right",autoClose:7e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),e.props.history.push("/manage")):g.b.error(m.data.message,{position:"top-right",autoClose:7e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),r.next=16;break;case 14:0===o.length&&e.setState({errors:s}),g.b.error("Please enter all the data in the correct form",{position:"top-right",autoClose:7e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0});case 16:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),e.validate=Object(l.a)(n.a.mark((function r(){var a;return n.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(a={},e.state.user.firstName.trim()||(a.firstName="First name is required"),e.state.user.lastName.trim()||(a.lastName="Last name is required"),e.state.user.username.trim()||(a.username="Username is required"),!e.state.user.username.trim()){r.next=9;break}return r.next=7,O.a.post(h.apiEnd+"/useravailability",{username:e.state.user.username.trim()});case 7:205==r.sent.status&&(a.username="Username is already exist");case 9:return e.state.user.email.trim()||(a.email="Email must be required"),e.state.user.password.trim()||(a.password="Password is required"),e.state.user.role_name.trim()||(a.role_name="Role name is required"),e.state.confermPassword.trim()||(a.confermPassword="Confirm Password is required"),r.abrupt("return",a);case 14:case"end":return r.stop()}}),r)}))),e.validateInput=function(r){switch(r.currentTarget.name){case"firstName":if(!r.currentTarget.value.trim())return"First name is must be  required";if(r.currentTarget.value.trim().length<4||r.currentTarget.value.trim().length>15)return"First name is should be greater than 3 and less than 15 character";if(!RegExp(/^[A-Za-z]+$/).test(r.currentTarget.value))return"First name is must be  valid";break;case"lastName":if(!r.currentTarget.value.trim())return"Last name is must be  required";if(r.currentTarget.value.trim().length<4||r.currentTarget.value.trim().length>15)return"Last name is should be greater than 3 and less than 15 character";if(!RegExp(/^[A-Za-z]+$/).test(r.currentTarget.value))return"Last name is must be  valid";break;case"username":if(!r.currentTarget.value.trim())return"Username is must be  required";if(r.currentTarget.value.trim().length<4||r.currentTarget.value.trim().length>15)return"Username is should be greater than 3 and less than 15 character";break;case"email":if(!r.currentTarget.value.trim())return"Email is must be  required";if(!RegExp(/^((?!\.)[\w-_.]*[^.])(@\w+)(\.\w+(\.\w+)?[^.\W])$/gm).test(r.currentTarget.value))return"Enter Email is must be  valid";break;case"password":if(!r.currentTarget.value.trim())return"password must be required";break;case"confermPassword":if(r.currentTarget.value.trim()!==e.state.user.password)return"password must be same"}return""},e.handlechange=function(r){var a=e.validateInput(r),t=Object(s.a)({},e.state.errors);t[r.currentTarget.name]=a;var n=Object(s.a)({},e.state.user),l=r.currentTarget;if("confermPassword"===l.name){var c=l.value;e.setState({confermPassword:c,errors:t})}else n[l.name]=l.value,e.setState({user:n,errors:t})},e.handleReset=function(){e.setState({user:{firstName:"",lastName:"",username:"",email:"",password:"",role_name:""},confermPassword:"",errors:{}})},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.state,r=e.user,a=(e.value1,e.errors);return Object(w.jsxs)(f.u,{xs:"12",md:"12",children:[Object(w.jsx)(g.a,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0}),Object(w.jsxs)(f.j,{children:[Object(w.jsx)(f.k,{children:Object(w.jsxs)(f.J,{action:"",method:"post",children:[Object(w.jsxs)(f.wb,{children:[Object(w.jsx)(f.u,{children:Object(w.jsxs)(f.K,{className:"pr-1",children:[Object(w.jsx)(f.cb,{htmlFor:"exampleInputName2",className:"pr-1",children:"First Name"}),Object(w.jsx)(f.S,{type:"text",name:"firstName",value:r.firstName,onChange:this.handlechange,placeholder:"First name",autoComplete:"firstName"}),a.firstName?Object(w.jsx)(f.L,{color:"danger",className:"help-block",children:a.firstName}):""]})}),Object(w.jsx)(f.u,{children:Object(w.jsxs)(f.K,{className:"pr-1",children:[Object(w.jsx)(f.cb,{htmlFor:"exampleInputEmail2",className:"pr-1",children:"Last Name"}),Object(w.jsx)(f.S,{value:r.lastName,name:"lastName",onChange:this.handlechange,type:"text",placeholder:"Last name",autoComplete:"lastName"}),a.lastName?Object(w.jsx)(f.L,{color:"danger",className:"help-block",children:a.lastName}):""]})})]}),Object(w.jsxs)(f.wb,{children:[Object(w.jsx)(f.u,{children:Object(w.jsxs)(f.K,{className:"pr-1",children:[Object(w.jsx)(f.cb,{htmlFor:"exampleInputName2",className:"pr-1",children:"Username"}),Object(w.jsx)(f.S,{value:r.username,name:"username",onChange:this.handlechange,type:"text",placeholder:"Username",autoComplete:"username"}),a.username?Object(w.jsx)(f.L,{color:"danger",className:"help-block",children:a.username}):""]})}),Object(w.jsx)(f.u,{children:Object(w.jsxs)(f.K,{className:"pr-1",children:[Object(w.jsx)(f.cb,{htmlFor:"exampleInputEmail2",className:"pr-1",children:"Role"}),Object(w.jsxs)(f.xb,{custom:!0,id:"role_name",name:"role_name",value:r.role_name,onChange:this.handlechange,children:[Object(w.jsx)("option",{value:"",children:"Please select role name"}),Object(w.jsx)("option",{value:"Agent",children:"Meest"}),Object(w.jsx)("option",{value:"Medly",children:"Medley"})]}),a.role_name?Object(w.jsx)(f.L,{color:"danger",className:"help-block",children:a.role_name}):""]})})]}),Object(w.jsx)(f.wb,{children:Object(w.jsx)(f.u,{children:Object(w.jsxs)(f.K,{className:"pr-1",children:[Object(w.jsx)(f.cb,{htmlFor:"exampleInputName2",className:"pr-1",children:"Email"}),Object(w.jsx)(f.S,{value:r.email,name:"email",onChange:this.handlechange,type:"email",placeholder:"Email",autoComplete:"email",required:!0}),a.email?Object(w.jsx)(f.L,{color:"danger",className:"help-block",children:a.email}):""]})})}),Object(w.jsxs)(f.wb,{children:[Object(w.jsx)(f.u,{children:Object(w.jsxs)(f.K,{className:"pr-1",children:[Object(w.jsx)(f.cb,{htmlFor:"exampleInputName2",className:"pr-1",children:"Password"}),Object(w.jsx)(f.S,{value:r.password,name:"password",onChange:this.handlechange,type:"password",placeholder:"Password",autoComplete:"new-password",required:!0}),a.password?Object(w.jsx)(f.L,{color:"danger",className:"help-block",children:a.password}):""]})}),Object(w.jsx)(f.u,{children:Object(w.jsxs)(f.K,{className:"pr-1",children:[Object(w.jsx)(f.cb,{htmlFor:"exampleInputEmail2",className:"pr-1",children:"Confirm Password"}),Object(w.jsx)(f.S,{value:this.state.confermPassword,name:"confermPassword",onChange:this.handlechange,type:"password",placeholder:"Confirm  password",autoComplete:"new-password",required:!0}),a.confermPassword?Object(w.jsx)(f.L,{color:"danger",className:"help-block",children:a.confermPassword}):""]})})]})]})}),Object(w.jsxs)(f.l,{children:[Object(w.jsxs)(f.f,{type:"submit",size:"sm",color:"success",onClick:this.handleSubmit,className:"mr-2",children:[Object(w.jsx)(v.a,{name:"cil-scrubber"})," Add Moderator"]}),Object(w.jsxs)(f.f,{type:"reset",size:"sm",color:"danger",onClick:this.handleReset,children:[Object(w.jsx)(v.a,{name:"cil-ban"})," Reset"]})]})]})]})}}]),a}(u.Component);r.default=N}}]);
//# sourceMappingURL=64.5c5a744d.chunk.js.map