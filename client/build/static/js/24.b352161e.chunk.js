(this.webpackJsonpmeest_moderation_panel=this.webpackJsonpmeest_moderation_panel||[]).push([[24],{1e3:function(e,t,r){"use strict";r.r(t);var a=r(687),n=r(115),s=r.n(n),c=r(172),i=r(62),o=r(168),l=r(169),u=r(170),d=r(171),m=r(1),h=r(173),p=r(88),f=r(684),b=r(116),j=(r(403),r(87)),v=r(864),g=r(667),x=r(673),O=r(30),y=function(e){Object(u.a)(r,e);var t=Object(d.a)(r);function r(){var e;Object(o.a)(this,r);for(var n=arguments.length,l=new Array(n),u=0;u<n;u++)l[u]=arguments[u];return(e=t.call.apply(t,[this].concat(l))).state={details:{},currentPage:1,pageSize:10,userData:[],sts:!0,user:{firstName:"",lastName:"",username:"",email:"",password:"",role_name:""},view:1,page:0,errors:{},serachText:"",usersData1:[]},e.isFormInvalid=function(){var t=Object(i.a)({},e.state.errors);return Object.keys(t).length<=0},e.ExportToExcel=function(){if(0==!e.state.usersData.length){var t=e.state.usersData;t.forEach((function(e){delete e.password})),t.forEach((function(e){delete e.deleted})),t.forEach((function(e){delete e.deleted_at}));Object(v.a)({data:t,fileName:"AgentList",exportType:"xls"})}else alert("no data")},e.handleSubmit=function(){var t=Object(c.a)(s.a.mark((function t(r){var a,n,i,o,l;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.preventDefault(),a=e.validate(),n=e.state,n.user,i=n.errors,o=Object.values(i).map((function(e){return""!==e})),0!==o.filter((function(e){return 1==e})).length||0!==Object.keys(a).length){t.next=11;break}return l=localStorage.getItem("token"),t.next=9,h.a.post(p.apiEnd+"/editmod",e.state.user,{headers:{Authorization:"Bearer ".concat(l)}}).then(function(){var t=Object(c.a)(s.a.mark((function t(r){var a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return b.b.success("Successfuly updated",{position:"top-right",autoClose:7e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),t.next=3,h.a.get(p.apiEnd+"/getalluserdata",{headers:{Authorization:"Bearer ".concat(l)}});case 3:a=t.sent,e.setState({usersData:a.data.result,usersData1:a.data.result,view:1,page:a.data.result.length});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){b.b.error(e.response.data.error,{position:"top-right",autoClose:7e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}));case 9:t.next=13;break;case 11:0===Object.keys(i).length&&e.setState({errors:a}),b.b.error("Please enter all the data in the correct form",{position:"top-right",autoClose:7e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0});case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.validate=function(){var t={};return e.state.user.firstName.trim()||(t.firstName="First name is required"),e.state.user.lastName.trim()||(t.lastName="Last name is required"),e.state.user.username.trim()||(t.username="Username is required"),e.state.user.email.trim()||(t.email="Email must be required"),e.state.user.password.trim()||(t.password="Password is required"),t},e.validateInput=function(e){switch(e.currentTarget.name){case"firstName":if(!e.currentTarget.value.trim())return"First name is required";if(e.currentTarget.value.trim().length<4||e.currentTarget.value.trim().length>15)return"First name is should be greater than 3 and less than 15 character";if(!RegExp(/^[A-Za-z]+$/).test(e.currentTarget.value))return"First name is must be  valid";break;case"lastName":if(!e.currentTarget.value.trim())return"Last name is required";if(e.currentTarget.value.trim().length<4||e.currentTarget.value.trim().length>15)return"Last name is should be greater than 3 and less than 15 character";if(!RegExp(/^[A-Za-z]+$/).test(e.currentTarget.value))return"Last name is must be  valid";break;case"username":if(!e.currentTarget.value.trim())return"Username is required";if(e.currentTarget.value.trim().length<4||e.currentTarget.value.trim().length>15)return"Username is should be greater than 3 and less than 15 character";break;case"email":if(!e.currentTarget.value.trim())return"Email is required";if(!RegExp(/[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,15}/g).test(e.currentTarget.value))return"Enter Email is must be  valid";break;case"password":if(!e.currentTarget.value.trim())return"password required"}return""},e.handlechange=function(t){var r=e.validateInput(t),a=Object(i.a)({},e.state.errors);a[t.currentTarget.name]=r;var n=Object(i.a)({},e.state.user),s=t.currentTarget;n[s.name]=s.value,e.setState({user:n,errors:a})},e.handleEnableDesable=function(){var t=Object(c.a)(s.a.mark((function t(r){var a,n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=localStorage.getItem("token"),0!==r.isDisabled&&null!==r.isDisabled){t.next=6;break}return t.next=4,h.a.post(p.apiEnd+"/EDmodservice",{mod_id:r.id,isDisabled:1},{headers:{Authorization:"Bearer ".concat(a)}});case 4:t.next=8;break;case 6:return t.next=8,h.a.post(p.apiEnd+"/EDmodservice",{mod_id:r.id,isDisabled:0},{headers:{Authorization:"Bearer ".concat(a)}});case 8:return t.next=10,h.a.get(p.apiEnd+"/getalluserdata",{headers:{Authorization:"Bearer ".concat(a)}});case 10:n=t.sent,e.setState({usersData:n.data.result,usersData1:n.data.result,page:n.data.result.length});case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handlebutton=function(t){e.setState({currentPage:t})},e.handleEdit=function(t){e.setState({user:t,view:2})},e.handlechange1=function(t){var r=t.currentTarget;e.setState({serachText:r.value})},e.handleSubmit2=function(){var t=Object(a.a)(e.state.usersData1),r=(j.a.getCurrentUser(),t.filter((function(t){return t.username==e.state.serachText})));e.setState({usersData:r,serachText:""})},e.handleBack=Object(c.a)(s.a.mark((function t(){var r,a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=localStorage.getItem("token"),t.next=3,h.a.get(p.apiEnd+"/getalluserdata",{headers:{Authorization:"Bearer ".concat(r)}});case 3:a=t.sent,e.setState({usersData:a.data.result,usersData1:a.data.result,view:1,page:a.data.result.length});case 5:case"end":return t.stop()}}),t)}))),e.handleSubmit1=function(){var t=Object(a.a)(e.state.usersData1);e.setState({usersData:t,serachText:""})},e}return Object(l.a)(r,[{key:"componentDidMount",value:function(){var e=Object(c.a)(s.a.mark((function e(){var t,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("token"),e.next=3,h.a.get(p.apiEnd+"/getalluserdata",{headers:{Authorization:"Bearer ".concat(t)}});case 3:r=e.sent,this.setState({usersData:r.data.result,usersData1:r.data.result,page:r.data.result.length});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=function(e){switch(e){case 1:return"success";case 0:case null:return"danger";default:return"primary"}},r=this.state,a=r.currentPage,n=r.pageSize,s=r.user,c=(r.page,r.errors);Object(f.a)(this.state.usersData,a,n);return Object(O.jsx)(O.Fragment,{children:1===this.state.view?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(g.u,{style:{textAlign:"right"},md:"12",children:Object(O.jsxs)(g.z,{children:[Object(O.jsx)(g.E,{size:"lg",color:"info",children:"Export"}),Object(O.jsx)(g.D,{placement:"bottom",modifiers:[{name:"flip",enabled:!1}],children:Object(O.jsx)(g.C,{onClick:this.ExportToExcel,children:"XLS"})})]})}),Object(O.jsx)(g.y,{items:this.state.usersData,fields:[{key:"username"},{key:"email"},{key:"created_at"},{key:"role_id",label:"Role"},{key:"isOnline",label:"Status"},{key:"enable/disable"},{key:"edit"}],tableFilter:!0,footer:!0,itemsPerPageSelect:!0,itemsPerPage:10,hover:!0,sorter:!0,pagination:!0,scopedSlots:{status:function(e){return Object(O.jsx)("td",{children:Object(O.jsx)(g.b,{color:t(e.status),children:e.status})})},"enable/disable":function(t,r){return Object(O.jsx)("td",{className:"py-2",children:Object(O.jsx)(g.Hb,{className:"mx-1",variant:"3d",value:t,color:"primary",checked:0!==t.isDisabled&&null!==t.isDisabled,onClick:function(){e.handleEnableDesable(t)}})})},role_id:function(e,t){return Object(O.jsx)("td",{className:"py-2",children:1==e.role_id?"Medley":2==e.role_id?"Meest":"Admin"})},isOnline:function(e,r){return Object(O.jsx)("td",{className:"py-2",children:Object(O.jsxs)(g.b,{color:t(e.isOnline),children:[0===e.isOnline||null===e.isOnline?"Offline":"online"," "]})})},created_at:function(e,t){return Object(O.jsx)("td",{className:"py-2",children:21===e.id||57===e.id?null:new Intl.DateTimeFormat("en-IN",{year:"numeric",month:"2-digit",day:"2-digit"}).format(new Date(e.created_at))})},edit:function(t,r){return Object(O.jsx)("td",{className:"py-2",children:Object(O.jsx)(g.f,{active:!0,block:!0,color:"success","aria-pressed":"true",onClick:function(){e.handleEdit(t)},children:"Edit"})})}}})]}):Object(O.jsxs)(g.u,{xs:"12",md:"12",children:[Object(O.jsx)(b.a,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0}),Object(O.jsxs)(g.j,{children:[Object(O.jsx)(g.k,{children:Object(O.jsxs)(g.J,{action:"",method:"post",children:[Object(O.jsxs)(g.wb,{children:[Object(O.jsx)(g.u,{children:Object(O.jsxs)(g.K,{className:"pr-1",children:[Object(O.jsx)(g.cb,{htmlFor:"exampleInputName2",className:"pr-1",children:"First Name"}),Object(O.jsx)(g.S,{type:"text",name:"firstName",value:s.firstName,onChange:this.handlechange,placeholder:"First name",autoComplete:"firstName"}),c.firstName?Object(O.jsx)(g.L,{color:"danger",className:"help-block",children:c.firstName}):""]})}),Object(O.jsx)(g.u,{children:Object(O.jsxs)(g.K,{className:"pr-1",children:[Object(O.jsx)(g.cb,{htmlFor:"exampleInputEmail2",className:"pr-1",children:"Last Name"}),Object(O.jsx)(g.S,{value:s.lastName,name:"lastName",onChange:this.handlechange,type:"text",placeholder:"Last name",autoComplete:"lastName"}),c.lastName?Object(O.jsx)(g.L,{color:"danger",className:"help-block",children:c.lastName}):""]})})]}),Object(O.jsxs)(g.wb,{children:[Object(O.jsx)(g.u,{children:Object(O.jsxs)(g.K,{className:"pr-1",children:[Object(O.jsx)(g.cb,{htmlFor:"exampleInputName2",className:"pr-1",children:"Username"}),Object(O.jsx)(g.S,{value:s.username,name:"username",onChange:this.handlechange,type:"text",placeholder:"Username",autoComplete:"username"}),c.username?Object(O.jsx)(g.L,{color:"danger",className:"help-block",children:c.username}):""]})}),Object(O.jsx)(g.u,{children:Object(O.jsxs)(g.K,{className:"pr-1",children:[Object(O.jsx)(g.cb,{htmlFor:"exampleInputName2",className:"pr-1",children:"Email"}),Object(O.jsx)(g.S,{value:s.email,name:"email",onChange:this.handlechange,type:"email",placeholder:"Email",autoComplete:"email",required:!0}),c.email?Object(O.jsx)(g.L,{color:"danger",className:"help-block",children:c.email}):""]})})]}),Object(O.jsx)(g.wb,{}),Object(O.jsx)(g.wb,{children:Object(O.jsx)(g.u,{children:Object(O.jsxs)(g.K,{className:"pr-1",children:[Object(O.jsx)(g.cb,{htmlFor:"exampleInputName2",className:"pr-1",children:"Password"}),Object(O.jsx)(g.S,{value:s.password,name:"password",onChange:this.handlechange,type:"password",placeholder:"Password",autoComplete:"new-password",required:!0}),c.password?Object(O.jsx)(g.L,{color:"danger",className:"help-block",children:c.password}):""]})})})]})}),Object(O.jsxs)(g.l,{children:[Object(O.jsxs)(g.f,{type:"submit",size:"sm",color:"success",onClick:this.handleSubmit,className:"mr-2",disabled:this.isFormInvalid(),children:[Object(O.jsx)(x.a,{name:"cil-scrubber"})," Update Moderator"]}),Object(O.jsxs)(g.f,{type:"reset",size:"sm",color:"info",onClick:this.handleBack,children:[Object(O.jsx)(x.a,{name:"cil-ban"})," Back to list"]})]})]})]})})}}]),r}(m.Component);t.default=y},671:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var a=r(672);function n(e,t){if(e){if("string"===typeof e)return Object(a.a)(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Object(a.a)(e,t):void 0}}},672:function(e,t,r){"use strict";function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}r.d(t,"a",(function(){return a}))},684:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var a=r(734),n=r.n(a);function s(e,t,r){var a=(t-1)*r;return n()(e).slice(a).take(r).value()}},687:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var a=r(672);var n=r(671);function s(e){return function(e){if(Array.isArray(e))return Object(a.a)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(n.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},864:function(e,t,r){"use strict";function a(e){return"[object Array]"===Object.prototype.toString.call(e)}function n(e,t){if(!e)throw new Error(t)}function s(e){return Object.keys(e)}function c(e){return Object.keys(e).map((function(t){return[t,e[t]]}))}function i(e,t,r){var a="."+t,n=new RegExp("(\\"+t+")?$");return r(e).replace(n,a)}function o(e,t,r,a){void 0===r&&(r="download"),void 0===a&&(a=!0);var n=function(e,t,r){switch(t){case"txt":var a="text/plain;charset=utf-8";return r?URL.createObjectURL(new Blob([e],{type:a})):"data:,"+a+encodeURIComponent(e);case"css":return a="text/css;charset=utf-8",r?URL.createObjectURL(new Blob([e],{type:a})):"data:,"+a+encodeURIComponent(e);case"html":return a="text/html;charset=utf-8",r?URL.createObjectURL(new Blob([e],{type:a})):"data:,"+a+encodeURIComponent(e);case"json":return a="text/json;charset=utf-8",r?URL.createObjectURL(new Blob([e],{type:a})):"data:,"+a+encodeURIComponent(e);case"csv":return a="text/csv;charset=utf-8",r?URL.createObjectURL(new Blob([e],{type:a})):"data:,"+a+encodeURIComponent(e);case"xls":return a="text/application/vnd.ms-excel;charset=utf-8",r?URL.createObjectURL(new Blob([e],{type:a})):"data:,"+a+encodeURIComponent(e);case"xml":return a="text/application/xml;charset=utf-8",r?URL.createObjectURL(new Blob([e],{type:a})):"data:,"+a+encodeURIComponent(e);default:return""}}(e,t,a),s=document.createElement("a");s.href=n,s.download=r,s.setAttribute("style","visibility:hidden"),document.body.appendChild(s),s.dispatchEvent(new MouseEvent("click",{bubbles:!1,cancelable:!1,view:window})),document.body.removeChild(s)}var l,u=function(){return(u=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},d=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var a,n,s=r.call(e),c=[];try{for(;(void 0===t||t-- >0)&&!(a=s.next()).done;)c.push(a.value)}catch(i){n={error:i}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return c};function m(e){return e.map(c).reduce((function(t,r,a){return r.reduce((function(t,r){var n=d(r,2),s=n[0],c=n[1],i=t[s]||Array.from({length:e.length}).map((function(e){return""}));return i[a]=("string"!==typeof c?JSON.stringify(c):c)||"",t[s]=i,t}),t)}),Object.create(null))}function h(e,t){return void 0===t&&(t=function(e){return e}),t(c(e).map((function(e){var t=d(e,2);return{fieldName:t[0],fieldValues:t[1]}})))}function p(e,t){return void 0===t&&(t=function(e){return e}),e.length?'<html>\n  <head>\n    <meta charset="UTF-8">\n  </head >\n  <body>\n    '+function(e,t){n(e.length>0);var r=h(m(e),t);return"\n    <table>\n      <thead>\n        <tr><th><b>"+r.map((function(e){return e.fieldName})).join("</b></th><th><b>")+"</b></th></tr>\n      </thead>\n      <tbody>\n        <tr>"+r.map((function(e){return e.fieldValues})).map((function(e){return e.map((function(e){return"<td>"+e+"</td>"}))})).reduce((function(e,t){return e.map((function(e,r){return""+e+t[r]}))})).join("</tr>\n        <tr>")+"</tr>\n      </tbody>\n    </table>\n  "}(e,t)+"\n  </body>\n</html >\n":""}function f(e){return'<?xml version="1.0" encoding="utf-8"?><!DOCTYPE base>\n'+b(e,"base")+"\n"}function b(e,t,r,n){void 0===r&&(r="element"),void 0===n&&(n=0);var s,i=(s=t,"555xmlHello .  world!".trim().replace(/^([0-9,;]|(xml))+/,""),s.replace(/[^_a-zA-Z 0-9:\-\.]/g,"").replace(/^([ 0-9-:\-\.]|(xml))+/i,"").replace(/ +/g,"-")),o=function(e){return Array(e+1).join(" ")}(n);return null===e||void 0===e?o+"<"+i+" />":o+"<"+i+">\n"+(a(e)?e.map((function(e){return b(e,r,r,n+2)})).join("\n"):"object"===typeof e?c(e).map((function(e){var t=d(e,2),a=t[0];return b(t[1],a,r,n+2)})).join("\n"):o+"  "+String(e).replace(/([<>&])/g,(function(e,t){switch(t){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";default:return""}})))+"\n"+o+"</"+i+">"}function j(e){var t=e.data,r=e.fileName,l=void 0===r?"download":r,b=e.extension,j=e.fileNameFormatter,v=void 0===j?function(e){return e.replace(/\s+/,"_")}:j,g=e.fields,x=e.exportType,O=void 0===x?"txt":x,y=e.replacer,w=void 0===y?null:y,N=e.space,k=void 0===N?4:N,E=e.processor,S=void 0===E?o:E,C=e.withBOM,D=void 0!==C&&C,T=e.delimiter,U=void 0===T?",":T,I=e.beforeTableEncode,L=void 0===I?function(e){return e}:I,R="Invalid export data. Please provide an array of object",A="Can't export unknown data type "+O+".",B="Can't export string data to "+O+".";if("string"===typeof t)switch(O){case"txt":case"css":case"html":return S(t,O,i(l,null!==b&&void 0!==b?b:O,v));default:throw new Error(B)}var F=function(e){if(!e||a(e)&&!e.length||!a(e)&&!s(e).length)return function(e){return e};var t=a(e)?e.reduce((function(e,t){var r;return u(u({},e),((r={})[t]=t,r))}),Object.create(null)):e;return function(e){return a(e)?e.map((function(e){return c(e).reduce((function(e,r){var a=d(r,2),n=a[0],s=a[1];return n in t&&(e[t[n]]=s),e}),Object.create(null))})).filter((function(e){return s(e).length})):c(e).reduce((function(e,r){var a=d(r,2),n=a[0],s=a[1];return n in t&&(e[t[n]]=s),e}),Object.create(null))}}(g)(function(t){try{return"string"===typeof t?JSON.parse(t):t}catch(e){throw new Error("Invalid export data. Please provide a valid JSON")}}(t)),P=function(t,r,a){void 0===r&&(r=null);try{return JSON.stringify(t,r,a)}catch(e){throw new Error("Invalid export data. Please provide valid JSON object")}}(F,w,k);switch(O){case"txt":case"css":case"html":return S(P,O,i(l,null!==b&&void 0!==b?b:O,v));case"json":return S(P,O,i(l,null!==b&&void 0!==b?b:"json",v));case"csv":n(a(F),R);var z=function(e,t,r){if(void 0===t&&(t=","),void 0===r&&(r=function(e){return e}),!e.length)return"";var a=h(m(e),r);return a.map((function(e){return e.fieldName})).join(t)+"\r\n"+a.map((function(e){return e.fieldValues})).map((function(e){return e.map((function(e){return'"'+e.replace(/\"/g,'""')+'"'}))})).reduce((function(e,r){return e.map((function(e,a){return""+e+t+r[a]}))})).join("\r\n")}(F,U,L);return S(D?"\ufeff"+z:z,O,i(l,null!==b&&void 0!==b?b:"csv",v));case"xls":return n(a(F),R),S(p(F,L),O,i(l,null!==b&&void 0!==b?b:"xls",v));case"xml":return S(f(F),O,i(l,null!==b&&void 0!==b?b:"xml",v));default:throw new Error(A)}}(l=j||(j={})).types={txt:"txt",css:"css",html:"html",json:"json",csv:"csv",xls:"xls",xml:"xml"},l.processors={downloadFile:o};var v=j;t.a=v}}]);
//# sourceMappingURL=24.b352161e.chunk.js.map