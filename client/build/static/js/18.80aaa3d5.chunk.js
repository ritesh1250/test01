(this.webpackJsonpmeest_moderation_panel=this.webpackJsonpmeest_moderation_panel||[]).push([[18],{678:function(e,t,s){},703:function(e,t,s){},856:function(e,t,s){"use strict";var o=s(115),a=s.n(o),c=s(172),i=s(669),n=s(1),r=(s(703),s(678),s(704)),l=s.n(r),d=s(845),m=s(116),u=s(87),b=(s(858),s(667)),h=s(30);t.a=function(e){var t=e.video,s=e.onVideoDelete,o=e.flags,r=e.topics,g=Object(n.useState)(0),j=Object(i.a)(g,2),p=j[0],v=j[1],O=Object(n.useState)(),f=Object(i.a)(O,2),x=(f[0],f[1]),k=Object(n.useState)(""),N=Object(i.a)(k,2),y=N[0],C=N[1],w=Object(n.useState)([]),S=Object(i.a)(w,2),_=S[0],B=S[1],P=Object(n.useState)([]),T=Object(i.a)(P,2),A=T[0],D=T[1],H=Object(n.useState)([]),I=Object(i.a)(H,2),F=I[0],E=I[1],V=Object(n.useState)([]),W=Object(i.a)(V,2),z=W[0],U=W[1],R=JSON.parse(JSON.parse(JSON.stringify(t.posts))),J=u.a.getCurrentUser(),M=new Date(t.createdAt),L=new Intl.DateTimeFormat("en-IN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(M),q=function(){var e=Object(c.a)(a.a.mark((function e(){var o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:_.length>0&&y&&A.length>0?(o={post_id:t.myautoid,status:"H",comment:y,topicData:A,flagData:_},s(o,t).then((function(e){m.b.dark("Post Holded",{position:"top-right",autoClose:2005,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})})),B([]),C(""),D([]),E([]),U([])):m.b.error("Write Comment,select topic and select flags",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(h.jsxs)("div",{className:"video-detail ",children:[Object(h.jsx)("div",{className:"embed-responsive embed-responsive-16by9 video-detail-animation",style:{height:350},children:null!==R?0===R[0].image?Object(h.jsx)(l.a,{playing:!0,className:'react-player embed-responsive-item"',url:R[p].post,width:"100%",height:"20%",controls:!0,onEnded:function(){var e;p+(e=1)<=R.length-1?(x(R[p+e]),v(p+e)):(x(R[0]),v(0))}}):Object(h.jsxs)(b.o,{className:"embed-responsive-item",children:[Object(h.jsx)(b.s,{children:R.map((function(e){return Object(h.jsx)(b.t,{children:Object(h.jsx)("img",{style:{objectFit:"contain"},height:"348",className:"d-block w-100",src:e.post,alt:"slide 1"})})}))}),Object(h.jsx)(b.q,{direction:"prev"}),Object(h.jsx)(b.q,{direction:"next"})]}):null}),Object(h.jsx)("div",{className:"details ",children:Object(h.jsxs)("div",{className:"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12 ",style:{backgroundColor:"#ffffff",padding:5},children:[Object(h.jsxs)("div",{className:"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12 row",children:[Object(h.jsx)("img",{src:"https://bestone-bucket-node.s3.ap-south-1.amazonaws.com/userUploads/j1BraXN9Kbxar.JPEG",alt:"src",style:{width:30,height:30,borderRadius:15}}),Object(h.jsxs)("span",{className:"col-9",style:{color:"black",fontWeight:"bold"},children:["Post Id : ",t.myautoid]})]}),R.length>1?Object(h.jsxs)("div",{className:"row ml-2",children:[Object(h.jsx)("div",{style:{color:"black",fontWeight:"bold"},children:"Note : "}),Object(h.jsx)("div",{style:{color:"red"},children:"This Post have multiple images/videos so go through all "})]}):"",Object(h.jsxs)("div",{className:"row ml-2",children:[Object(h.jsx)("div",{style:{color:"black",fontWeight:"bold"},children:"User Id : "}),Object(h.jsx)("div",{style:{color:"black"},children:t.userId})]}),Object(h.jsxs)("div",{className:"row ml-2",children:[Object(h.jsx)("div",{style:{color:"black",fontWeight:"bold"},children:"Caption : "}),Object(h.jsx)("span",{className:"col-5",style:{"word-wrap":"break-word",display:"inline-block"},children:t.caption?decodeURI(decodeURIComponent(t.caption)).replace(/%23/g,"#").replace(/\+/g," "):"No Caption"})]}),Object(h.jsxs)("div",{className:"row ml-2",children:[Object(h.jsx)("div",{style:{color:"black",fontWeight:"bold"},children:"Uploaded Time : "}),Object(h.jsx)("div",{style:{color:"black"},children:L})]}),"Agent"===J.role_name?"":Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("div",{className:"row ml-2",children:[Object(h.jsx)("div",{style:{color:"black",fontWeight:"bold"},children:"Holded by : "}),Object(h.jsx)("div",{style:{color:"black"},children:t.username})]}),Object(h.jsxs)("div",{className:"row ml-2",children:[Object(h.jsx)("div",{style:{color:"black",fontWeight:"bold"},children:"Flag given : "}),Object(h.jsx)("div",{style:{color:"black"},children:t.flag_name})]}),Object(h.jsxs)("div",{className:"row ml-2",children:[Object(h.jsx)("div",{style:{color:"black",fontWeight:"bold"},children:"Comment by mod : "}),Object(h.jsx)("div",{style:{color:"black"},children:t.comment})]})]}),Object(h.jsx)("div",{children:Object(h.jsxs)(b.wb,{className:"mb-2 mt-3",children:[Object(h.jsx)(b.u,{col:"4",sm:"4",md:"",xl:"",className:"ml-xl-4 mb-xl-3 ml-md-4 mb-md-3",children:Object(h.jsx)(b.f,{onClick:function(e){if("Agent"===J.role_name)if(A.length>0&&0===_.length){var o={post_id:t.myautoid,status:1,topicData:A};s(o,t).then((function(e){Object(m.b)("Post Approved",{position:"top-right",autoClose:2005,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})})),B([]),C(""),D([]),E([]),U([])}else m.b.error("select topic and not select flag",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0});else if(y){var a={post_id:t.myautoid,status:1,comment:y};s(a,t).then((function(e){Object(m.b)("Post Approved",{position:"top-right",autoClose:2005,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})})),B([]),C(""),D([]),E([]),U([])}else m.b.error("Please enter comment",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})},active:!0,block:!0,style:{backgroundColor:"#C1F9B2"},className:"Element element ","aria-pressed":"true",children:"Approve"})}),Object(h.jsx)(b.u,{col:"4",sm:"4",md:"",xl:"",className:"mb-lg-3 mb-md-3",children:Object(h.jsx)(b.f,{onClick:function(){if("Agent"===J.role_name)if(_.length>0&&y&&A.length>0){var e={post_id:t.myautoid,status:0,comment:y,topicData:A,flagData:_};s(e,t).then((function(){m.b.warning("Post Rejected",{position:"top-right",autoClose:2005,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})})),B([]),C(""),D([]),E([]),U([])}else m.b.error("Write Comment,select topic and select flags",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0});else if(y){var o={post_id:t.myautoid,status:0,comment:y};s(o,t).then((function(){m.b.warning("Post Rejected",{position:"top-right",autoClose:2005,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})})),B([]),C(""),D([]),E([]),U([])}else m.b.error("Please enter comment",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})},active:!0,block:!0,style:{backgroundColor:"rgba(253, 55, 55, 0.700)"},className:"Element element tada","aria-pressed":"true",children:"Reject"})}),"Agent"===J.role_name?Object(h.jsx)(b.u,{col:"4",sm:"4",md:"",xl:"",className:"mb-lg-3 mr-lg-4 mb-xl-3 mr-xl-4 mb-md-3 mr-md-4 ",children:Object(h.jsx)(b.f,{onClick:q,active:!0,block:!0,className:"Element element tada",style:{backgroundColor:"rgba(119, 117, 117, 0.981)"},"aria-pressed":"true",children:"Hold"})}):""]})}),Object(h.jsx)("form",{children:Object(h.jsx)("div",{className:"form-group",children:Object(h.jsx)("input",{value:y,onChange:function(e){var t=e.currentTarget;C(t.value)},id:"comment",name:"comment",placeholder:"Enter comment on this post",className:"form-control"})})}),"Agent"===J.role_name?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(d.a,{value:z,isMulti:!0,options:o,onChange:function(e){var t=e.map((function(e){return e.value}));B(t),U(e)},className:"basic-multi-select",placeholder:"Select Flag"}),Object(h.jsx)("br",{}),Object(h.jsx)(d.a,{value:F,options:r,onChange:function(e){D(e.value),E(e)},className:"basic-multi-select",placeholder:"Select Topic"})]}):""]})})]})}},858:function(e,t,s){},859:function(e,t,s){"use strict";(function(e){var o=s(115),a=s.n(o),c=s(172),i=s(669),n=s(1),r=(s(703),s(678),s(704)),l=s.n(r),d=s(845),m=s(116),u=s(87),b=s(667),h=s(30);t.a=function(t){var s=t.video,o=t.onVideoDelete,r=t.flags,g=t.topics,j=Object(n.useState)(0),p=Object(i.a)(j,2),v=p[0],O=p[1],f=Object(n.useState)("https://bestone-medley-newbucket.s3.ap-south-1.amazonaws.com/8w5tahIhJI04_02_2021_132220append.mp4"),x=Object(i.a)(f,2),k=(x[0],x[1]),N=Object(n.useState)(),y=Object(i.a)(N,2),C=y[0],w=y[1],S=Object(n.useState)(""),_=Object(i.a)(S,2),B=_[0],P=_[1],T=Object(n.useState)(""),A=Object(i.a)(T,2),D=A[0],H=A[1],I=Object(n.useState)([]),F=Object(i.a)(I,2),E=F[0],V=F[1],W=Object(n.useState)([]),z=Object(i.a)(W,2),U=z[0],R=z[1],J=["https://bestone-medley-newbucket.s3.ap-south-1.amazonaws.com/8w5tahIhJI04_02_2021_132220append.mp4","https://bestone-medley-newbucket.s3.ap-south-1.amazonaws.com/JozqWeS62403_19_2021_094309govt_(6).mp4"],M=u.a.getCurrentUser();if(!s)return k(J[0]),Object(h.jsx)("div",{className:"loading-video"});var L=function(){var e=Object(c.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:B.length>0&&C&&D.length>0?(t={post_id:s.post_id,status:"H",comment:C,topicData:D,flagData:B},o(t,s).then((function(e){m.b.dark("Post Holded",{position:"top-right",autoClose:2005,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),P([]),w(""),H([]),V([]),R([])}))):m.b.error("Write Comment,select topic and select flags",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(h.jsxs)("div",{className:"video-detail ",children:[Object(h.jsx)("div",{className:"embed-responsive embed-responsive-16by9 video-detail-animation",style:{height:350},children:Object(h.jsx)(l.a,{playing:!0,className:'react-player embed-responsive-item"',url:s.post_video,width:"100%",height:"20%",controls:!0,onEnded:function(){var e;v+(e=1)<=J.length-1?(k(J[v+e]),O(v+e)):(k(J[0]),O(0))}})}),Object(h.jsx)("div",{className:"details ",children:Object(h.jsxs)("div",{className:"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12 ",style:{backgroundColor:"#ffffff",padding:5},children:[Object(h.jsxs)("div",{className:"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12 row",children:[Object(h.jsx)("img",{src:"https://bestone-bucket-node.s3.ap-south-1.amazonaws.com/userUploads/j1BraXN9Kbxar.JPEG",alt:"src",style:{width:30,height:30,borderRadius:15}}),Object(h.jsxs)("span",{className:"col-9",style:{color:"black",fontWeight:"bold"},children:["Post Id : ",s.post_id]})]}),Object(h.jsxs)("div",{className:"row ml-2",children:[Object(h.jsx)("div",{style:{color:"black",fontWeight:"bold"},children:"User id : "}),Object(h.jsx)("div",{style:{color:"black"},children:s.user_id})]}),Object(h.jsxs)("div",{className:"row ml-2",children:[Object(h.jsx)("div",{style:{color:"black",fontWeight:"bold"},children:"Caption : "}),Object(h.jsx)("span",{className:"col-10",style:{color:"black","word-wrap":"break-word",display:"inline-block"},children:e.from(s.post_description,"utf8").toString()})]}),Object(h.jsxs)("div",{className:"row ml-2",children:[Object(h.jsx)("div",{style:{color:"black",fontWeight:"bold"},children:"Uploaded Time : "}),Object(h.jsx)("div",{style:{color:"black"},children:s.created_date})]}),"Medly"===M.role_name?"":Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("div",{className:"row ml-2",children:[Object(h.jsx)("div",{style:{color:"black",fontWeight:"bold"},children:"Holded by : "}),Object(h.jsx)("div",{style:{color:"black"},children:s.username})]}),Object(h.jsxs)("div",{className:"row ml-2",children:[Object(h.jsx)("div",{style:{color:"black",fontWeight:"bold"},children:"Flag given : "}),Object(h.jsx)("div",{style:{color:"black"},children:s.flag_name})]}),Object(h.jsxs)("div",{className:"row ml-2",children:[Object(h.jsx)("div",{style:{color:"black",fontWeight:"bold"},children:"Comment by mod : "}),Object(h.jsx)("div",{style:{color:"black"},children:s.comment})]})]}),Object(h.jsx)("div",{children:Object(h.jsxs)(b.wb,{className:"mb-2 mt-3",children:[Object(h.jsx)(b.u,{col:"4",sm:"4",md:"",xl:"",className:"ml-xl-4 mb-xl-3 ml-md-4 mb-md-3",children:Object(h.jsx)(b.f,{onClick:function(e){if("Medly"===M.role_name)if(D.length>0&&0===B.length){var t={post_id:s.post_id,status:1,topicData:D};o(t,s).then((function(e){m.b.success("Post Approved",{position:"top-right",autoClose:2005,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),P([]),w(""),H([]),V([]),R([])}))}else m.b.error("select topic and not select flag",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0});else if(C){var a={post_id:s.post_id,status:1,comment:C};o(a,s).then((function(e){m.b.success("Post Approved",{position:"top-right",autoClose:2005,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),P([]),w(""),H([]),V([]),R([])}))}else m.b.error("Please enter comment",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})},active:!0,block:!0,style:{backgroundColor:"#C1F9B2"},className:"Element element ","aria-pressed":"true",children:"Approve"})}),Object(h.jsx)(b.u,{col:"4",sm:"4",md:"",xl:"",className:"mb-lg-3 mb-md-3",children:Object(h.jsx)(b.f,{onClick:function(){if("Medly"===M.role_name)if(B.length>0&&C&&D.length>0){var e={post_id:s.post_id,status:0,comment:C,topicData:D,flagData:B};o(e,s).then((function(){m.b.warning("Post Rejected",{position:"top-right",autoClose:2005,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),P([]),w(""),H([]),V([]),R([])}))}else m.b.error("Write Comment,select topic and select flags",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0});else if(C){var t={post_id:s.post_id,status:0,comment:C};o(t,s).then((function(){m.b.warning("Post Rejected",{position:"top-right",autoClose:2005,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),P([]),w(""),H([]),V([]),R([])}))}else m.b.error("Please enter comment",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})},active:!0,block:!0,style:{backgroundColor:"rgba(253, 55, 55, 0.700)"},className:"Element element tada","aria-pressed":"true",children:"Reject"})}),"Medly"===M.role_name?Object(h.jsx)(b.u,{col:"4",sm:"4",md:"",xl:"",className:"mb-lg-3 mr-lg-4 mb-xl-3 mr-xl-4 mb-md-3 mr-md-4 ",children:Object(h.jsx)(b.f,{onClick:L,active:!0,block:!0,className:"Element element tada",style:{backgroundColor:"rgba(119, 117, 117, 0.981)"},"aria-pressed":"true",children:"Hold"})}):""]})}),Object(h.jsx)("form",{children:Object(h.jsx)("div",{className:"form-group",children:Object(h.jsx)("input",{value:C,onChange:function(e){var t=e.currentTarget;w(t.value)},id:"comment",name:"comment",placeholder:"Enter comment on this post",className:"form-control"})})}),"Medly"===M.role_name?Object(h.jsxs)(h.Fragment,{children:[" ",Object(h.jsx)(d.a,{value:U,isMulti:!0,options:r,onChange:function(e){var t=e.map((function(e){return e.value}));P(t),R(e)},className:"basic-multi-select",placeholder:"Select Flag"}),Object(h.jsx)("br",{}),Object(h.jsx)(d.a,{value:E,options:g,onChange:function(e){H(e.value),V(e)},className:"basic-multi-select",placeholder:"Select Topic"})]}):""]})})]})}}).call(this,s(843).Buffer)},860:function(e,t,s){"use strict";s(1);var o=s(861),a=s(30);t.a=function(e){var t=e.videos.map((function(t){return Object(a.jsx)(o.a,{onVideoSelect:e.onVideoSelect,video:t},t.id)}));return Object(a.jsx)("ul",{className:"col-md-12",children:t})}},861:function(e,t,s){"use strict";(function(e){s(1),s(703),s(835);var o=s(862),a=s(30);t.a=function(t){var s=t.video,c=t.onVideoSelect,i=new Date(s.created_date),n=new Intl.DateTimeFormat("en-IN",{year:"numeric",month:"2-digit",day:"2-digit"}).format(i),r=new Intl.DateTimeFormat("en-IN",{hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(i);return Object(a.jsx)("li",{onClick:function(){return c(s)},className:"list-group-item list-item-custom ",children:Object(a.jsxs)("div",{className:"video-list media",children:[Object(a.jsx)("div",{className:"media-right",children:Object(a.jsx)("img",{className:"media-object",style:{marginRight:5},width:"120px",height:"80px",src:o.a,alt:"list"})}),Object(a.jsxs)("div",{className:"media-body",style:{marginLeft:10},children:[Object(a.jsx)("div",{className:"",style:{fontWeight:"bold",width:5},children:e.from(s.post_description,"utf8").toString().substring(0,20)}),Object(a.jsx)("div",{className:"media-heading-channel-title",style:{fontSize:"auto"},children:n}),Object(a.jsx)("div",{className:"media-heading-channel-date",style:{fontSize:"auto"},children:r})]})]})})}}).call(this,s(843).Buffer)},862:function(e,t,s){"use strict";t.a=s.p+"static/media/notthumbnail.c84c720b.png"},869:function(e,t,s){"use strict";s(1),s(703);var o=s(30),a=function(e){var t=e.video,s=e.onVideoSelect,a=t.thumbnail,c=new Date(t.createdAt),i=new Intl.DateTimeFormat("en-IN",{year:"numeric",month:"2-digit",day:"2-digit"}).format(c),n=new Intl.DateTimeFormat("en-IN",{hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(c);return Object(o.jsx)("li",{onClick:function(){return s(t)},className:"list-group-item list-item-custom ",children:Object(o.jsxs)("div",{className:"video-list media",children:[Object(o.jsx)("div",{className:"media-right",children:Object(o.jsx)("img",{className:"media-object",style:{objectFit:"contain",marginRight:5},width:"120px",height:"80px",src:a,alt:"list"})}),Object(o.jsxs)("div",{className:"media-body",style:{marginLeft:10},children:[Object(o.jsx)("div",{className:"",style:{fontWeight:"bold"},children:t.caption?decodeURI(decodeURIComponent(t.caption)).replace(/%23/g,"#").replace(/\+/g," ").substring(0,20):"No Caption"}),Object(o.jsx)("div",{className:"media-heading-channel-title",style:{fontSize:"auto"},children:i}),Object(o.jsx)("div",{className:"media-heading-channel-date",style:{fontSize:"auto"},children:n})]})]})})};t.a=function(e){var t=e.videos.map((function(t){return Object(o.jsx)(a,{onVideoSelect:e.onVideoSelect,video:t},t.id)}));return Object(o.jsx)("ul",{className:"col-md-12 ",children:t})}},992:function(e,t,s){"use strict";s.r(t);var o=s(687),a=s(115),c=s.n(a),i=s(172),n=s(168),r=s(169),l=s(170),d=s(171),m=s(1),u=s(869),b=s(835),h=s(856),g=s(173),j=s(116),p=s(87),v=s(88),O=s(859),f=s(860),x=s(30),k=function(e){Object(l.a)(s,e);var t=Object(d.a)(s);function s(e){var a;return Object(n.a)(this,s),(a=t.call(this,e)).listarr=[],a.clearTimeoutFunc=function(){a.warnTimeout&&clearTimeout(a.warnTimeout),a.logoutTimeout&&clearTimeout(a.logoutTimeout)},a.setTimeout=function(){a.warnTimeout=setTimeout(a.warn,a.state.warningTime),a.logoutTimeout=setTimeout(a.logout,a.state.signoutTime)},a.resetTimeout=function(){a.clearTimeoutFunc(),a.setTimeout()},a.warn=function(){console.log("You will be logged out automatically in 1 minute.")},a.logout=function(){console.log("Sending a logout request to the API..."),a.destroy()},a.destroy=Object(i.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return localStorage.getItem("token"),t=p.a.getCurrentUser(),e.next=4,g.a.post(v.apiEnd+"/logout",{userid:t.id,sessionid:t.sessionid});case 4:e.sent,localStorage.removeItem("token"),window.location="/";case 7:case"end":return e.stop()}}),e)}))),a.handleDeleteVideo=function(){var e=Object(i.a)(c.a.mark((function e(t,s){var i,n,r,l,d;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=localStorage.getItem("token"),e.next=3,g.a.post(v.apiEnd+"/approvepost",t,{headers:{Authorization:"Bearer ".concat(i)}});case 3:if(n=p.a.getCurrentUser(),r=Object(o.a)(a.state.videos),l=r.filter((function(e){return e.id!==s.id})),a.setState({videos:l,selectedVideo:l[0],flagData:[]}),!(a.state.videos.length<5&&0===a.state.count)){e.next=13;break}return g.a.get(v.apiEnd+"/moderatorallocate",{headers:{Authorization:"Bearer ".concat(i)}}),e.next=11,g.a.get(v.apiEnd+"/moderator",{headers:{Authorization:"Bearer ".concat(i)}});case 11:d=e.sent,a.setState({videos:d.data.result,data:d,selectedVideo:d.data.result[0],user:n});case 13:case"end":return e.stop()}}),e)})));return function(t,s){return e.apply(this,arguments)}}(),a.handleBreak=function(){var e=Object(i.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t?a.setState({flag1:t,count:1,buttonName:"Start Allocation"}):a.setState({flag1:t,count:0,buttonName:"Stop Allocation"});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleAllocation=Object(i.a)(c.a.mark((function e(){var t,s,o,i,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("token"),s=p.a.getCurrentUser(),e.next=4,g.a.get(v.apiEnd+"/moderatorallocate",{headers:{Authorization:"Bearer ".concat(t)}});case 4:return e.sent,e.next=7,g.a.get(v.apiEnd+"/moderator",{headers:{Authorization:"Bearer ".concat(t)}});case 7:return o=e.sent,e.next=10,g.a.get(v.apiEnd+"/flagData",{headers:{Authorization:"Bearer ".concat(t)}});case 10:return i=e.sent,e.next=13,g.a.get(v.apiEnd+"/topicdata",{headers:{Authorization:"Bearer ".concat(t)}});case 13:n=e.sent,a.setState({videos:o.data.result,selectedVideo:o.data.result[0],data:o,user:s,flags:i.data.flagname,topics:n.data.topicName});case 15:case"end":return e.stop()}}),e)}))),a.state={videos:[],data:[],selectedVideo:null,flags:[],flagData:[],flagCB:[],topics:[],topicCB:[],user:{},warningTime:24e4,signoutTime:200500,count:0,flag1:!1,buttonName:"Stop Allocation"},a}return Object(r.a)(s,[{key:"componentDidMount",value:function(){var e=Object(i.a)(c.a.mark((function e(){var t,s,o,a,i,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.events=["load","mousemove","mousedown","click","scroll","keypress"],t=localStorage.getItem("token"),s=p.a.getCurrentUser(),e.next=5,g.a.get(v.apiEnd+"/moderator",{headers:{Authorization:"Bearer ".concat(t)}});case 5:return o=e.sent,e.next=8,g.a.get(v.apiEnd+"/flagData",{headers:{Authorization:"Bearer ".concat(t)}});case 8:return a=e.sent,e.next=11,g.a.get(v.apiEnd+"/topicdata",{headers:{Authorization:"Bearer ".concat(t)}});case 11:for(n in i=e.sent,this.setState({videos:o.data.result,selectedVideo:o.data.result[0],data:o,user:s,flags:a.data.flagname,topics:i.data.topicName}),this.events)window.addEventListener(this.events[n],this.resetTimeout);this.setTimeout();case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(x.jsx)(x.Fragment,{children:this.state.videos.length>0?Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("div",{className:" row",children:"Agent"===this.state.user.role_name?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:" col-xl-8 col-lg-8 col-md-8 col-sm-12",children:Object(x.jsx)(h.a,{video:this.state.selectedVideo,onVideoDelete:this.handleDeleteVideo,flags:this.state.flags,topics:this.state.topics})}),Object(x.jsx)(j.a,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0}),Object(x.jsx)(j.a,{}),Object(x.jsxs)("div",{className:" col-xl-4 col-lg-4 col-md-4 col-sm-12",children:[Object(x.jsx)("div",{className:"col-12 ",children:Object(x.jsx)("button",{className:"col-12 btn btn-info",onClick:function(){return e.handleBreak(!e.state.flag1)},children:this.state.buttonName})}),Object(x.jsx)(b.Scrollbars,{style:{padding:0,margin:0},children:Object(x.jsx)(u.a,{videos:this.state.videos,onVideoSelect:function(t){return e.setState({selectedVideo:t})}})})]})]}):Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:" col-xl-8 col-lg-8 col-md-8 col-sm-12",children:Object(x.jsx)(O.a,{video:this.state.selectedVideo,onVideoDelete:this.handleDeleteVideo,flags:this.state.flags,topics:this.state.topics})}),Object(x.jsx)(j.a,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0}),Object(x.jsx)(j.a,{}),Object(x.jsxs)("div",{className:" col-xl-4 col-lg-4 col-md-4 col-sm-12",children:[Object(x.jsx)("div",{className:"col-12 ",children:Object(x.jsx)("button",{className:"col-12 btn btn-info",onClick:function(){return e.handleBreak(!e.state.flag1)},children:this.state.buttonName})}),Object(x.jsx)(b.Scrollbars,{style:{padding:0,margin:0},children:Object(x.jsx)(f.a,{videos:this.state.videos,onVideoSelect:function(t){return e.setState({selectedVideo:t})}})})]})]})})}):Object(x.jsxs)("div",{className:"row",children:[Object(x.jsx)("div",{className:"col-4",children:Object(x.jsx)("h4",{children:"No Post Available"})}),Object(x.jsx)("div",{className:"col-8 text-right",children:Object(x.jsx)("button",{className:"btn btn-info",onClick:function(){return e.handleAllocation()},children:"Start Allocation"})})]})})}}]),s}(m.Component);t.default=k}}]);
//# sourceMappingURL=18.80aaa3d5.chunk.js.map